---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "gitea_repository_branch_protection Resource - gitea"
subcategory: ""
description: |-
  Manages branch protection rules for a Gitea repository.
---

# gitea_repository_branch_protection (Resource)

Manages branch protection rules for a Gitea repository.

## Example Usage

```terraform
resource "gitea_repository" "example" {
  username = "root"
  name     = "protected-repo"
}

resource "gitea_repository_branch_protection" "main" {
  username  = gitea_repository.example.username
  name      = gitea_repository.example.name
  rule_name = "main"

  enable_push             = true
  push_whitelist_users    = ["root", "admin"]
  push_whitelist_teams    = ["maintainers"]

  merge_whitelist_users   = ["root"]
  merge_whitelist_teams   = ["maintainers"]

  required_approvals      = 2
  approval_whitelist_users = ["root", "reviewer1", "reviewer2"]

  status_check_patterns = ["ci/test", "ci/lint"]

  block_merge_on_rejected_reviews         = true
  block_merge_on_official_review_requests = false
  block_merge_on_outdated_branch          = true
  dismiss_stale_approvals                 = true

  require_signed_commits    = false
  protected_file_patterns   = "*.lock;go.sum"
  unprotected_file_patterns = "docs/*;*.md"
}

# Protect release branches with a pattern
resource "gitea_repository_branch_protection" "releases" {
  username  = gitea_repository.example.username
  name      = gitea_repository.example.name
  rule_name = "release/*"

  enable_push          = true
  push_whitelist_users = ["root"]

  required_approvals      = 1
  require_signed_commits  = true
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Repository name.
- `rule_name` (String) Protected Branch Name Pattern.
- `username` (String) User name or organization name.

### Optional

- `approval_whitelist_teams` (List of String) Only reviews from allowlisted teams will count to the required approvals.
- `approval_whitelist_users` (List of String) Only reviews from allowlisted users will count to the required approvals.
- `block_merge_on_official_review_requests` (Boolean) Merging will not be possible when it has official review requests, even if there are enough approvals.
- `block_merge_on_outdated_branch` (Boolean) Merging will not be possible when head branch is behind base branch.
- `block_merge_on_rejected_reviews` (Boolean) Merging will not be possible when changes are requested by official reviewers.
- `dismiss_stale_approvals` (Boolean) When new commits that change the content of the pull request are pushed to the branch, old approvals will be dismissed.
- `enable_push` (Boolean) Anyone with write access will be allowed to push to this branch (but not force push).
- `merge_whitelist_teams` (List of String) Allow only allowlisted teams to merge pull requests into this branch.
- `merge_whitelist_users` (List of String) Allow only allowlisted users to merge pull requests into this branch.
- `protected_file_patterns` (String) Protected file patterns (separated using semicolon `;`).
- `push_whitelist_deploy_keys` (Boolean) Allow deploy keys with write access to push. Requires enable_push.
- `push_whitelist_teams` (List of String) Allowlisted teams for pushing. Requires enable_push to be set to true.
- `push_whitelist_users` (List of String) Allowlisted users for pushing. Requires enable_push to be set to true.
- `require_signed_commits` (Boolean) Reject pushes to this branch if they are unsigned or unverifiable.
- `required_approvals` (Number) Allow only to merge pull request with enough positive reviews.
- `status_check_patterns` (List of String) Patterns to specify which status checks must pass before branches can be merged into a branch that matches this rule.
- `unprotected_file_patterns` (String) Unprotected file patterns (separated using semicolon `;`).

### Read-Only

- `created_at` (String) Timestamp when the rule was created.
- `enable_approval_whitelist` (Boolean) True if an approval whitelist is used.
- `enable_merge_whitelist` (Boolean) True if a merge whitelist is used.
- `enable_push_whitelist` (Boolean) True if a push whitelist is used.
- `enable_status_check` (Boolean) Require status checks to pass before merging.
- `id` (String) The ID of this resource.
- `updated_at` (String) Timestamp when the rule was last updated.
